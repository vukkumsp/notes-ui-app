import{a as ne,b as k,c as oe,d as ie,e as re,f as ae,g as se}from"./chunk-GBTX2BJF.js";import{a as le,b as Y,c as pe,d as me,g as ce,h as de,i as ue,j as fe}from"./chunk-IVP3IT7K.js";import{$a as x,Ca as j,M as I,Ma as f,Na as g,Oa as K,Pa as Z,Q as N,Qa as J,R as T,Ra as C,Sa as i,Ta as o,Ua as l,Va as B,W as G,Wa as w,X as O,Xa as u,Za as a,_a as q,ab as Q,ba as z,cb as L,db as y,fb as W,jb as X,oa as s,sa as m,ub as ee,vb as te,wb as b,ya as p}from"./chunk-UOLKX3QQ.js";function Se(e,n){if(e&1&&(i(0,"small",4),a(1),L(2,"date"),o(),i(3,"small",4),a(4),L(5,"date"),o()),e&2){let t=u();s(),x("Created on ",y(2,2,t.createdAt,"short")),s(3),x("Last updated ",y(5,5,t.updatedAt,"short"))}}function _e(e,n){if(e&1&&(i(0,"small",4),a(1),L(2,"date"),o()),e&2){let t=u();s(),x("Created on ",y(2,1,t.createdAt,"short"))}}var F=class e{title="";content="";createdAt="";updatedAt="";id="";constructor(){}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=p({type:e,selectors:[["app-note-component"]],inputs:{title:"title",content:"content",createdAt:"createdAt",updatedAt:"updatedAt",id:"id"},decls:8,vars:3,consts:[[1,"card","m-3","shadow-sm"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"text-muted"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"div",1)(2,"h5",2),a(3),o(),i(4,"p",3),a(5),o(),f(6,Se,6,8)(7,_e,3,4,"small",4),o()()),t&2&&(s(3),q(r.title),s(2),q(r.content),s(),g(r.createdAt<r.updatedAt?6:7))},dependencies:[b,te],encapsulation:2})};var _="https://notes-service-iwwy.onrender.com",h="https://usermanagement-cq2a.onrender.com",D={AUTH:{LOGIN:`${h}/auth/login`,REGISTER:`${h}/auth/register`,LOGOUT:`${h}/auth/logout`,REFRESH_TOKEN:`${h}/auth/refresh-token`,PROFILE:`${h}/auth/profile`},NOTES:{GET_ALL:`${_}/api/notes`,GET_BY_ID:e=>`${_}/api/notes/${e}`,CREATE:`${_}/api/notes`,UPDATE:e=>`${_}/api/notes/${e}`,DELETE:e=>`${_}/api/notes/${e}`},USERS:{GET_ALL:"/api/users",GET_BY_ID:e=>`/api/users/${e}`,UPDATE:e=>`/api/users/${e}`,DELETE:e=>`/api/users/${e}`}},Re=`${_}/api/notes`,He=`${h}/api/users`,Ae=`${h}/api/auth`,Me=`${Ae}/login`;var c=class e{constructor(n){this.http=n}storage=localStorage;isAuthenticated(){return!!this.storage.getItem("authToken")}login(n,t){this.http.post(D.AUTH.LOGIN,{username:n,password:t,appName:"notes-service"}).subscribe({next:r=>{console.log("Login successful:",r),this.storeToken(r.token)},error:r=>{throw console.error("Login failed:",r),r}})}logout(){this.storage.removeItem("authToken")}storeToken(n){this.storage.setItem("authToken",n)}getAuthToken(){return this.storage.getItem("authToken")}static \u0275fac=function(t){return new(t||e)(N(k))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})};var A=class e{constructor(n){this.http=n}getNotes(){return this.http.get(D.NOTES.GET_ALL)}static \u0275fac=function(t){return new(t||e)(N(k))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})};function Ee(e,n){if(e&1&&l(0,"app-note-component",1),e&2){let t=n.$implicit;C("title",t.title)("content",t.content)("createdAt",t.createdAt)("updatedAt",t.updatedAt)("id",t.id)}}function Ie(e,n){if(e&1&&Z(0,Ee,1,5,"app-note-component",1,K),e&2){let t=u();J(t.notes)}}function Ne(e,n){if(e&1&&(i(0,"div",0),a(1),o()),e&2){let t=u();s(),x(" ",t.message," ")}}var H=class e{constructor(n,t,r){this.authService=n;this.notesService=t;this.cdr=r}notes=[];message="";ngOnInit(){this.authService.getAuthToken()!=null&&this.authService.getAuthToken()!=""?this.notesService.getNotes().subscribe({next:n=>{console.log(" Notes fetched:",n),this.notes=n,this.message="",this.cdr.markForCheck()},error:n=>{console.error("Error fetching notes:",n)}}):(this.message="Please login to view all notes.",this.cdr.markForCheck())}static \u0275fac=function(t){return new(t||e)(m(c),m(A),m(X))};static \u0275cmp=p({type:e,selectors:[["app-all-notes-view"]],decls:3,vars:2,consts:[[1,"alert","alert-info","mt-3"],[3,"title","content","createdAt","updatedAt","id"]],template:function(t,r){t&1&&(i(0,"div"),f(1,Ie,2,0),f(2,Ne,2,1,"div",0),o()),t&2&&(s(),g(r.notes.length>0?1:-1),s(),g(r.message?2:-1))},dependencies:[F,b],encapsulation:2})};function Te(e,n){e&1&&(i(0,"div",11),a(1," Username is required. "),o())}function Le(e,n){e&1&&(i(0,"div",11),a(1," Password is required. "),o())}var M=class e{constructor(n){this.authService=n}loginFormBuilder=T(ue);loginForm=this.loginFormBuilder.group({username:["",Y.required],password:["",Y.required]});login(){if(this.loginForm.valid){let{username:n,password:t}=this.loginForm.value;console.log("Logging in with:",n,t),n!=null&&n!=null&&t!=null&&t!=null&&this.authService.login(n,t)}else console.error("Form is invalid")}static \u0275fac=function(t){return new(t||e)(m(c))};static \u0275cmp=p({type:e,selectors:[["app-login-component"]],decls:17,vars:3,consts:[[1,"card","m-5","shadow-sm"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"mb-3",3,"formGroup"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username","placeholder","Enter username",1,"form-control"],["class","text-danger",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Enter password",1,"form-control"],[1,"btn","btn-primary",3,"click"],[1,"text-danger"]],template:function(t,r){if(t&1&&(i(0,"div",0)(1,"div",1)(2,"h5",2),a(3,"Login"),o(),i(4,"p",3),a(5,"Login Please"),o(),i(6,"div",4)(7,"label",5),a(8,"Username"),o(),l(9,"input",6),j(10,Te,2,0,"div",7),i(11,"label",8),a(12,"Password"),o(),l(13,"input",9),j(14,Le,2,0,"div",7),o(),i(15,"button",10),w("click",function(){return r.login()}),a(16,"Login"),o()()()),t&2){let d,E;s(6),C("formGroup",r.loginForm),s(4),C("ngIf",((d=r.loginForm.get("username"))==null?null:d.invalid)&&((d=r.loginForm.get("username"))==null?null:d.touched)),s(4),C("ngIf",((E=r.loginForm.get("password"))==null?null:E.invalid)&&((E=r.loginForm.get("password"))==null?null:E.touched))}},dependencies:[fe,le,pe,me,ce,de,b,ee],encapsulation:2})};var U=class e{constructor(n){this.authService=n}login(){this.authService.login("admin","admin")}static \u0275fac=function(t){return new(t||e)(m(c))};static \u0275cmp=p({type:e,selectors:[["app-login-view"]],decls:1,vars:0,template:function(t,r){t&1&&l(0,"app-login-component")},dependencies:[M],encapsulation:2})};var ve=[{path:"",component:H},{path:"login",component:U},{path:"admin",loadChildren:()=>import("./chunk-XELBU7VO.js").then(e=>e.AdminModule)},{path:"inbox",loadComponent:()=>import("./chunk-73LB2JLW.js").then(e=>e.InboxView)}];var he=(e,n)=>{let t=T(c);if(e.url.includes("/api/notes")){let r=t.getAuthToken(),d=e.clone({setHeaders:{Authorization:`Bearer ${r}`}});return n(d)}return n(e)};var Ce={providers:[z(),W(),se(ve),oe(ie([he]))]};var xe={production:!1,notesBaseUrl:"https://notes-service-iwwy.onrender.com",userMgmtUrl:"https://usermanagement-cq2a.onrender.com"};function ye(e,n){if(e&1){let t=B();i(0,"button",21),w("click",function(){G(t);let d=u();return O(d.goToLogin())}),a(1,"Login"),o()}}function ke(e,n){if(e&1){let t=B();i(0,"button",22),w("click",function(){G(t);let d=u();return O(d.logout())}),a(1,"Logout"),o()}}var V=class e{constructor(n,t,r){this.authService=n;this.notesService=t;this.router=r}isLoggedIn=!1;ngOnInit(){this.isLoggedIn=this.authService.isAuthenticated()}goToLogin(){this.router.navigate(["/login"])}getNotes(){this.notesService.getNotes().subscribe({next:n=>{console.log("Notes:",n)},error:n=>{console.error("Error fetching notes:",n)}})}logout(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||e)(m(c),m(A),m(ae))};static \u0275cmp=p({type:e,selectors:[["app-header-component"]],decls:42,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","d-flex","flex-row","w-100"],[1,"nav-item"],["aria-current","page","href","",1,"nav-link","active"],[1,"nav-item","dropdown"],["data-bs-toggle","dropdown","href","#","role","button","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"dropdown-menu"],["href","inbox",1,"dropdown-item"],["href","#",1,"dropdown-item"],[1,"dropdown-divider"],["href","login",1,"nav-link"],["href","admin",1,"nav-link"],["href","#","tabindex","-1","aria-disabled","true",1,"nav-link","disabled"],[1,"nav-item","ms-auto"],[1,"btn","btn-primary"],[1,"btn","btn-warning"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-warning",3,"click"]],template:function(t,r){t&1&&(i(0,"header")(1,"nav",0)(2,"div",1)(3,"a",2),a(4,"Notes App"),o(),i(5,"button",3),l(6,"span",4),o(),i(7,"div",5)(8,"ul",6)(9,"li",7)(10,"a",8),a(11,"All Notes"),o()(),i(12,"li",9)(13,"a",10),a(14,"Views"),o(),i(15,"ul",11)(16,"li")(17,"a",12),a(18,"Inbox"),o()(),i(19,"li")(20,"a",13),a(21,"Another action"),o()(),i(22,"li")(23,"a",13),a(24,"Something else here"),o()(),i(25,"li"),l(26,"hr",14),o(),i(27,"li")(28,"a",13),a(29,"Separated link"),o()()()(),i(30,"li",7)(31,"a",15),a(32,"Login"),o()(),i(33,"li",7)(34,"a",16),a(35,"Admin"),o()(),i(36,"li",7)(37,"a",17),a(38,"Disabled"),o()(),i(39,"li",18),f(40,ye,2,0,"button",19),f(41,ke,2,0,"button",20),o()()()()()()),t&2&&(s(40),g(r.isLoggedIn?-1:40),s(),g(r.isLoggedIn?41:-1))},encapsulation:2})};var $=class e{get currentYear(){return new Date().getFullYear()}get appVersion(){return"1.0.0"}get appName(){return"Notes App"}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=p({type:e,selectors:[["app-footer-component"]],decls:3,vars:2,template:function(t,r){t&1&&(i(0,"footer"),a(1),l(2,"br"),o()),t&2&&(s(),Q(" ",r.currentYear," \xA9 ",r.appName,". All rights reserved. "))},encapsulation:2})};var P=class e{environment=xe;title="notes-ui-app";static \u0275fac=function(t){return new(t||e)};static \u0275cmp=p({type:e,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"d-flex","flex-column","min-vh-100"],[1,"container","flex-grow-1","py-4"],[1,"bg-dark","text-white","text-center","py-3"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"app-header-component"),a(2,"asdf"),o(),i(3,"div",1),l(4,"router-outlet"),o(),l(5,"app-footer-component",2),o())},dependencies:[re,V,$],encapsulation:2})};ne(P,Ce).catch(e=>console.error(e));
